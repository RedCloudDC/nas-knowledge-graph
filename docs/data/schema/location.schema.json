{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://nas-knowledge-graph.example.com/schemas/location",
  "title": "Location Node Schema",
  "description": "Schema for location nodes including airport terminals, FAA facilities, and geographic locations",
  "type": "object",
  "required": ["id", "name", "type", "coordinates"],
  "properties": {
    "id": {
      "type": "string",
      "description": "Unique identifier for the location",
      "pattern": "^LOC[0-9]{6}$"
    },
    "name": {
      "type": "string",
      "description": "Human-readable name of the location",
      "minLength": 1,
      "maxLength": 200
    },
    "type": {
      "type": "string",
      "enum": [
        "airport_terminal",
        "faa_stars_terminal",
        "faa_eram_terminal",
        "approach_control",
        "tower",
        "geographic_location",
        "maintenance_facility",
        "operations_center"
      ],
      "description": "Type of location or facility"
    },
    "airportCode": {
      "type": "string",
      "description": "IATA or ICAO airport code (if applicable)",
      "pattern": "^[A-Z]{3,4}$"
    },
    "address": {
      "type": "object",
      "description": "Physical address of the location",
      "properties": {
        "street": {
          "type": "string",
          "maxLength": 200
        },
        "city": {
          "type": "string",
          "maxLength": 100
        },
        "state": {
          "type": "string",
          "maxLength": 50
        },
        "postalCode": {
          "type": "string",
          "pattern": "^[0-9]{5}(-[0-9]{4})?$"
        },
        "country": {
          "type": "string",
          "maxLength": 50,
          "default": "United States"
        }
      }
    },
    "coordinates": {
      "type": "object",
      "description": "Geographic coordinates",
      "required": ["latitude", "longitude"],
      "properties": {
        "latitude": {
          "type": "number",
          "minimum": -90,
          "maximum": 90,
          "description": "Latitude in decimal degrees"
        },
        "longitude": {
          "type": "number",
          "minimum": -180,
          "maximum": 180,
          "description": "Longitude in decimal degrees"
        },
        "elevation": {
          "type": "number",
          "description": "Elevation in feet above sea level"
        }
      },
      "additionalProperties": false
    },
    "timeZone": {
      "type": "string",
      "description": "IANA time zone identifier",
      "pattern": "^[A-Za-z_/]+$"
    },
    "operatingHours": {
      "type": "object",
      "description": "Operating hours for the facility",
      "properties": {
        "24x7": {
          "type": "boolean",
          "description": "True if facility operates 24/7"
        },
        "schedule": {
          "type": "object",
          "description": "Weekly operating schedule (if not 24x7)",
          "properties": {
            "monday": { "$ref": "#/definitions/daySchedule" },
            "tuesday": { "$ref": "#/definitions/daySchedule" },
            "wednesday": { "$ref": "#/definitions/daySchedule" },
            "thursday": { "$ref": "#/definitions/daySchedule" },
            "friday": { "$ref": "#/definitions/daySchedule" },
            "saturday": { "$ref": "#/definitions/daySchedule" },
            "sunday": { "$ref": "#/definitions/daySchedule" }
          }
        }
      }
    },
    "regionalDesignation": {
      "type": "string",
      "enum": [
        "eastern",
        "central",
        "western",
        "southern",
        "great_lakes",
        "new_england",
        "northwest_mountain",
        "southwest"
      ],
      "description": "FAA regional designation"
    },
    "parentLocation": {
      "type": "string",
      "description": "Reference to parent location ID (if applicable)",
      "pattern": "^LOC[0-9]{6}$"
    },
    "capacity": {
      "type": "object",
      "description": "Facility capacity information",
      "properties": {
        "equipmentCount": {
          "type": "integer",
          "minimum": 0,
          "description": "Number of equipment items at this location"
        },
        "personnelCount": {
          "type": "integer",
          "minimum": 0,
          "description": "Number of personnel assigned to this location"
        },
        "maxCapacity": {
          "type": "integer",
          "minimum": 0,
          "description": "Maximum operational capacity"
        }
      }
    },
    "contactInfo": {
      "type": "object",
      "description": "Contact information for the facility",
      "properties": {
        "phone": {
          "type": "string",
          "pattern": "^\\+?[0-9\\-\\(\\)\\s]+$"
        },
        "email": {
          "type": "string",
          "format": "email"
        },
        "emergencyContact": {
          "type": "string",
          "pattern": "^\\+?[0-9\\-\\(\\)\\s]+$"
        }
      }
    },
    "metadata": {
      "type": "object",
      "properties": {
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "description": "Record creation timestamp"
        },
        "updatedAt": {
          "type": "string",
          "format": "date-time",
          "description": "Record last update timestamp"
        },
        "version": {
          "type": "string",
          "description": "Schema version"
        }
      }
    }
  },
  "definitions": {
    "daySchedule": {
      "type": "object",
      "properties": {
        "open": {
          "type": "string",
          "pattern": "^([0-1][0-9]|2[0-3]):[0-5][0-9]$",
          "description": "Opening time in HH:MM format (24-hour)"
        },
        "close": {
          "type": "string",
          "pattern": "^([0-1][0-9]|2[0-3]):[0-5][0-9]$",
          "description": "Closing time in HH:MM format (24-hour)"
        },
        "closed": {
          "type": "boolean",
          "description": "True if facility is closed this day"
        }
      }
    }
  },
  "additionalProperties": false
}
